# Migration configuration for State/Territory content type.
id: state_territory
label: State/Territory Nodes
migration_group: nodes
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: json
  urls:
    - https://raw.githubusercontent.com/usagov/vote-gov/staging/data/states.json
  item_selector: /
  fields:
    - name: title
      label: 'Name'
      selector: state_name
    - name: abbreviation
      label: 'Abbreviation'
      selector: state_abbreviation
    - name: is_state
      label: 'Is State'
      selector: is_state
    - name: registration_type
      label: 'Registration Type'
      selector: registration_type
    - name: translation_key
      label: 'Translation Key'
      selector: translationKey
    - name: type
      label: 'Type'
      selector: type
    - name: hp_link
      label: 'HP Link'
      selector: hp_link
    - name: registration_link
      label: 'Registration Link'
      selector: registration_link
    - name: more_info_link
      label: 'More Info Link'
      selector: more_info_link
    - name: confirm_registration_link
      label: 'Confirm Registration Link'
      selector: confirm_registration_link
  ids:
    abbreviation:
      type: string
process:
  title: title
  field_state_abbreviation: abbreviation
  field_is_state:
    plugin: convert_string_to_boolean
    source: is_state 
  field_registration_type: registration_type
  field_election_homepage_link/uri: hp_link
  field_registration_link/uri: registration_link
  field_more_info_link/uri: more_info_link
  field_confirm_registration_link/uri: confirm_registration_link
  langcode:
    plugin: default_value
    default_value: 'en'
  uid:
    plugin: default_value
    default_value: 1
destination:
  plugin: 'entity:node'
  default_bundle: state_territory
migration_dependencies:
  required: []
  optional: []