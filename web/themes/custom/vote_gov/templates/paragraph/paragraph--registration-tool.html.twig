{#
/**
 * @file
 * Default theme implementation to display a registration tool paragraph.
 *
 * @ingroup themeable
 */
#}

{{ attach_library('vote_gov/registration_tool') }}

{% block paragraph %}
  <div class="bg-blue css-arrow page-vote">
    <div class="grid-container">
      <div class="grid-row grid-gap">
        <div class="tablet:grid-col-4">
         {% include '@vote_gov/partial/site-logo.html.twig' %}
        </div>
        <div id="skip-target" class="tablet:grid-col-8 right-shift">
          <section class="register align-bottom" role="region" aria-label="{{ content.field_heading | field_value }}">
            <header>
              <h1 class="main-heading" data-test="main-header">{{ content.field_heading | field_value }}</h1>
            </header>

              <form id="state-search">
                <h2>{{ content.field_form_heading | field_value }}</h2>
                <label class="usa-sr-only">
                  {{ content.field_dropdown_label | field_value }}
                </label>
                <div class="input-buttons-group">
                <input class="state-input" list="states" id="state-input" autocomplete="off" 
                  onfocus="stateListVisible()" onblur="stateListVisible()" onkeyup="filterStateList()">
                <button class="reset-btn" type="reset" alt="Clear the search form">
                  <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
                    <use xlink:href="{{ theme_path }}/dist/assets/img/sprite.svg#close"></use>
                  </svg>
                </button>
                <button 
                  class="dropdown-btn" type="button"
                  onclick="stateListVisible()" onblur="stateListVisible()">
                  <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
                    <use xlink:href="{{ theme_path }}/dist/assets/img/sprite.svg#expand_more"></use>
                  </svg>
                </button>
                </div>
                <div id="filtered-states-list" class="usa-language__submenu" style="display: none;">
                    <ul id="state-list-results" class="usa-language__submenu__list">
                    {% set results = drupal_view_result('state_territory', 'block') %}
                    {% for result in results %}
                        {% set nodeID = result._entity.id() %}
                        {% set node_path = path('entity.node.canonical', {'node': nodeID}) %}
                        <li class="usa-language__submenu-item">
                        <a href="{{ node_path }}">{{ result.node_field_data_title }}</a>
                      </li>
                    {% endfor %}
                    </ul>
                </div>
              </form>     
                       
          </section>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
